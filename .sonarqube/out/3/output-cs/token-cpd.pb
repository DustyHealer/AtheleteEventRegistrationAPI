€
XC:\Users\amazi\OneDrive\Documents\Personal\SBA\athlete-app-backend\APIGateway\Program.cs
	namespace

 	

APIGateway


 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
CreateHostBuilder 
( 
args "
)" #
.# $
Build$ )
() *
)* +
.+ ,
Run, /
(/ 0
)0 1
;1 2
} 	
public 
static 
IHostBuilder "
CreateHostBuilder# 4
(4 5
string5 ;
[; <
]< =
args> B
)B C
=>D F
Host 
.  
CreateDefaultBuilder %
(% &
args& *
)* +
. %
ConfigureAppConfiguration *
(* +
(+ ,
host, 0
,0 1
config2 8
)8 9
=>: <
{ 
config 
. 
AddJsonFile &
(& '
$str' 4
)4 5
;5 6
} 
) 
. $
ConfigureWebHostDefaults )
() *

webBuilder* 4
=>5 7
{ 

webBuilder 
. 

UseStartup )
<) *
Startup* 1
>1 2
(2 3
)3 4
;4 5
} 
) 
; 
} 
} ¥
XC:\Users\amazi\OneDrive\Documents\Personal\SBA\athlete-app-backend\APIGateway\Startup.cs
	namespace 	

APIGateway
 
{ 
public 

class 
Startup 
{ 
public 
void 
ConfigureServices %
(% &
IServiceCollection& 8
services9 A
)A B
{ 	
services 
. 
	AddOcelot 
( 
)  
.  !
	AddConsul! *
(* +
)+ ,
;, -
var 
key 
= 
new  
SymmetricSecurityKey .
(. /
Encoding/ 7
.7 8
UTF88 <
.< =
GetBytes= E
(E F
$strF c
)c d
)d e
;e f
services 
. 
AddAuthentication &
(& '
options' .
=>/ 1
{ 
options 
. %
DefaultAuthenticateScheme 1
=2 3
JwtBearerDefaults4 E
.E F 
AuthenticationSchemeF Z
;Z [
options 
. "
DefaultChallengeScheme .
=/ 0
JwtBearerDefaults1 B
.B C 
AuthenticationSchemeC W
;W X
} 
) 
. 
AddJwtBearer 
( 
o 
=>  
o! "
." #%
TokenValidationParameters# <
== >
new? B%
TokenValidationParametersC \
(\ ]
)] ^
{   $
ValidateIssuerSigningKey!! (
=!!) *
true!!+ /
,!!/ 0
IssuerSigningKey""  
=""! "
key""# &
,""& '
ValidateIssuer$$ 
=$$  
true$$! %
,$$% &
ValidIssuer%% 
=%% 
$str%% '
,%%' (
ValidateAudience''  
=''! "
true''# '
,''' (
ValidAudience(( 
=(( 
$str((  ,
})) 
))) 
;)) 
}** 	
public-- 
void-- 
	Configure-- 
(-- 
IApplicationBuilder-- 1
app--2 5
,--5 6
IWebHostEnvironment--7 J
env--K N
)--N O
{.. 	
if// 
(// 
env// 
.// 
IsDevelopment// !
(//! "
)//" #
)//# $
{00 
app11 
.11 %
UseDeveloperExceptionPage11 -
(11- .
)11. /
;11/ 0
}22 
app44 
.44 

UseRouting44 
(44 
)44 
;44 
app66 
.66 
UseAuthentication66 !
(66! "
)66" #
.66# $
	UseOcelot66$ -
(66- .
)66. /
.66/ 0
Wait660 4
(664 5
)665 6
;666 7
app88 
.88 
UseEndpoints88 
(88 
	endpoints88 &
=>88' )
{99 
	endpoints:: 
.:: 
MapGet::  
(::  !
$str::! $
,::$ %
async::& +
context::, 3
=>::4 6
{;; 
await<< 
context<< !
.<<! "
Response<<" *
.<<* +

WriteAsync<<+ 5
(<<5 6
$str<<6 D
)<<D E
;<<E F
}== 
)== 
;== 
}>> 
)>> 
;>> 
}?? 	
}@@ 
}AA 